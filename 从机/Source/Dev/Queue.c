/********************************************************************************************************
**------------------------------------------------------------------------------------------------------
** 文件: queue.c
** 版本: v1.0
**------------------------------------------------------------------------------------------------------
** 描述:
**     本项目主文件实现队列算法
**------------------------------------------------------------------------------------------------------
********************************************************************************************************/
#include "config.h"
#include "queue.h"

/*******************************************************************************************************
** 函数: QueueInit, 串口队列初始化
**------------------------------------------------------------------------------------------------------
** 参数: *buf数据缓存、Size 缓存空间、*Queue  队列指针
** 返回: 无
********************************************************************************************************/
void QueueInit( char *psBuf, unsigned int Size, Queue_t *ptQueue ) 
{
	ptQueue->unBack = ptQueue->unFront=0;						// 入队指针和出队指针都清0		  	
	ptQueue->unResidue = 0 ;									// 数据个数为0   
	ptQueue->unSize= Size ;		   								// BUF的数据长度为0
	ptQueue->psBuff= psBuf ;				   					// Buf的地址
}

/*******************************************************************************************************
** 函数: QueueInPut, 队列写函数
**------------------------------------------------------------------------------------------------------
** 参数: pdata  数据、 *Queue 队列指针
** 返回: FALSE队列满 TRUE读成功
********************************************************************************************************/
int QueueInPut( char cData,  Queue_t *ptQueue ) 
{
	if((ptQueue->unBack+1)%ptQueue->unSize==ptQueue->unFront)
		return FALSE;											// 队列满
	ptQueue->psBuff[ptQueue->unBack]=cData;						// 入数据
	ptQueue->unBack=(ptQueue->unBack+1)%ptQueue->unSize;		// 入队指针后移	   	
	ptQueue->unResidue=(ptQueue->unResidue+1)%ptQueue->unSize;		
	return TRUE;												// 成功
}

/*******************************************************************************************************
** 函数: QueueOutPut, 队列读函数
**------------------------------------------------------------------------------------------------------
** 参数: *pdata 数据指针、 *Queue 队列指针
** 返回: FALSE队列空 TRUE读成功
********************************************************************************************************/
int QueueOutPut( char *pcData, Queue_t *ptQueue ) 
{
	if(ptQueue->unBack==ptQueue->unFront)
		return FALSE;												// 队列空
	*pcData = ptQueue->psBuff[ptQueue->unFront];					// 出数据
	ptQueue->unFront=(ptQueue->unFront+1)%ptQueue->unSize;			// 出队指针后移
	ptQueue->unResidue=(ptQueue->unResidue-1);	
	return TRUE;													// 成功
}

/********************************************************************************************************
**                            End Of File
********************************************************************************************************/
